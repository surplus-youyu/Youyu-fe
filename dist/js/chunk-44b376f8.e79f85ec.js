(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44b376f8"],{"5c81":function(t,e,a){"use strict";var s=a("a9d6"),r=a.n(s);r.a},a9d6:function(t,e,a){},f2ea:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticStyle:{"text-align":"center","margin-top":"1rem","margin-bottom":"1rem"}},[t._v("个人中心")]),a("div",{staticClass:"info-wrapper"},[a("div",{staticClass:"info",staticStyle:{width:"40%","min-width":"500px"}},[a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("性别")]),a("Select",{staticStyle:{width:"78px"},attrs:{size:"large"},model:{value:t.userInfo.gender,callback:function(e){t.$set(t.userInfo,"gender",e)},expression:"userInfo.gender"}},t._l(t.genderList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label)+"\n          ")])}),1)],1),a("div",{staticStyle:{display:"flex",width:"80%"}},[a("div",{staticClass:"detail-wrapper",staticStyle:{width:"30%"}},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("年龄")]),a("InputNumber",{attrs:{size:"large",max:130,min:0},model:{value:t.userInfo.age,callback:function(e){t.$set(t.userInfo,"age",e)},expression:"userInfo.age"}})],1),a("div",{staticClass:"detail-wrapper",staticStyle:{width:"70%"}},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("年级")]),a("Select",{attrs:{size:"large"},model:{value:t.userInfo.grade,callback:function(e){t.$set(t.userInfo,"grade",e)},expression:"userInfo.grade"}},t._l(t.gradeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label)+"\n            ")])}),1)],1)]),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("专业")]),a("Input",{staticStyle:{width:"80%"},attrs:{type:"text",size:"large"},model:{value:t.userInfo.major,callback:function(e){t.$set(t.userInfo,"major",e)},expression:"userInfo.major"}})],1),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("昵称")]),a("Input",{staticStyle:{width:"80%"},attrs:{type:"text",size:"large"},model:{value:t.userInfo.nickname,callback:function(e){t.$set(t.userInfo,"nickname",e)},expression:"userInfo.nickname"}})],1),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("修改密码")]),a("Poptip",{attrs:{trigger:"focus",content:"清空则不会修改密码",placement:"top-start"}},[a("Input",{attrs:{type:"password",size:"large",clearable:""},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1)],1),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("邮箱")]),a("span",[t._v("已绑定邮箱："+t._s(t.userInfo.email))])]),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"}},[t._v("密保手机")]),a("span",[t._v("已绑定手机："+t._s(t.phoneDisplay))])]),a("div",{staticClass:"detail-wrapper"},[a("span",{staticClass:"sub-title",staticStyle:{"margin-bottom":"1rem"},attrs:{size:"large"}},[t._v("余额")]),a("Input",{staticStyle:{width:"80%"},attrs:{prefix:"logo-usd",size:"large",disabled:""},model:{value:t.userInfo.balance,callback:function(e){t.$set(t.userInfo,"balance",e)},expression:"userInfo.balance"}})],1)]),a("div",{staticClass:"avatar",staticStyle:{margin:"1rem 0 0 0"}},[a("img",{ref:"userAvatar",staticStyle:{width:"128px",height:"128px","border-radius":"50%","margin-bottom":"1rem"},attrs:{src:t.avatar,alt:"Avatar"}}),a("Upload",{attrs:{action:t.uploadAvatarURL,name:"avatar","show-upload-list":!1,"before-upload":t.handleUpload,"on-success":t.avatarUploadSuccess}},[a("Button",{attrs:{size:"large"}},[t._v("更换头像")])],1)],1)]),a("div",{staticClass:"submit-btn-wrapper"},[a("Button",{attrs:{type:"primary"},on:{click:t.updateInfo}},[t._v("更新信息")])],1)])},r=[],n=(a("96cf"),a("3b8d")),i=a("d225"),l=a("b0b4"),u=a("308d"),c=a("6bb5"),o=a("4e2b"),p=a("9ab4"),d=a("60a3"),v=a("5c57"),f=a("5d0f"),m=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(u["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.userInfo={uid:-1,nickname:"",age:0,gender:"m",balance:0,phone:"",email:"",password:"",grade:"",major:""},t.avatar="",t.uploadAvatarURL="/api/user/:uid/avatar",t.genderMap={m:"男",f:"女"},t.genderList=[{value:"m",label:"男"},{value:"f",label:"女"}],t.gradeList=[{value:"1",label:"大一"},{value:"2",label:"大二"},{value:"3",label:"大三"},{value:"4",label:"大四"}],t}return Object(o["a"])(e,t),Object(l["a"])(e,[{key:"handleUpload",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<10,a){t.next=5;break}return this.$Message.error("请上传图片类型的文件"),t.abrupt("return",!1);case 5:if(s){t.next=8;break}return this.$Message.error("上传头像图片大小不能超过 10MB"),t.abrupt("return",!1);case 8:return t.abrupt("return",a&&s);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"avatarUploadSuccess",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.$refs.userAvatar,e.src="/api/user/".concat(this.userInfo.uid,"/avatar?t=").concat(Math.random()),this.$Message.success("更新成功");case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"updateInfo",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/".concat(f["f"]),this.userInfo);case 2:e=t.sent,e.status?this.$Message.success("更新成功"):this.$Message.error("更新失败，请稍候重试");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"phoneDisplay",get:function(){return this.userInfo.phone.slice(0,3)+"****"+this.userInfo.phone.slice(7)}}]),e}(d["d"]);p["a"]([Object(d["b"])("updateAvatar")],m.prototype,"avatarUploadSuccess",null),m=p["a"]([Object(d["a"])({name:"personalCenter",beforeRouteEnter:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a,s){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=v["a"].getters["user/".concat(f["b"])],s(r?function(t){t.userInfo=Object.assign({},r),t.avatar="/api/user/".concat(t.userInfo.uid,"/avatar"),t.uploadAvatarURL="/api/user/".concat(t.userInfo.uid,"/avatar")}:"/login");case 2:case"end":return t.stop()}},t)}));function e(e,a,s){return t.apply(this,arguments)}return e}()})],m);var b=m,g=b,h=(a("5c81"),a("2877")),w=Object(h["a"])(g,s,r,!1,null,"4aa25c26",null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-44b376f8.e79f85ec.js.map